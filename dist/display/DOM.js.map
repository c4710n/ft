{"version":3,"sources":["../../src/display/DOM.js"],"names":["app","PIXI","Layer","transformDOM","Sprite","Texture","DOM","tag","layer","DOM_INTERACTION","EMPTY","dom","document","createElement","skipFirstUpdate","style","opacity","container","appendChild","parentElement","removeChild","renderDOM","displayObject"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,GAAP,MAAgB,QAAhB;AACA,SAASC,IAAT,EAAeC,KAAf,QAA4B,SAA5B;AACA,SAASC,YAAT,QAA6B,SAA7B;AAEA,IAAQC,MAAR,GAA4BH,IAA5B,CAAQG,MAAR;AAAA,IAAgBC,OAAhB,GAA4BJ,IAA5B,CAAgBI,OAAhB;AAEA;AACA;AACA;;IACMC,G;;;;;AACJ,iBAAiE;AAAA;;AAAA,QAArDC,GAAqD,uEAA/C,KAA+C;;AAAA,mFAAJ,EAAI;AAAA,0BAAtCC,KAAsC;AAAA,QAAtCA,KAAsC,2BAA9BN,KAAK,CAACO,eAAwB;;AAAA;;AAC/D,8BAAMJ,OAAO,CAACK,KAAd;AAEA,UAAKF,KAAL,GAAaA,KAAb;AACA,UAAKG,GAAL,GAAWC,QAAQ,CAACC,aAAT,CAAuBN,GAAvB,CAAX;AACA,UAAKO,eAAL,GAAuB,KAAvB;AAL+D;AAMhE;;;;WAED,mBAAU;AACR;AACA;AACA,WAAKH,GAAL,CAASI,KAAT,CAAeC,OAAf,GAAyB,CAAzB;AACAhB,MAAAA,GAAG,CAACiB,SAAJ,CAAcC,WAAd,CAA0B,KAAKP,GAA/B;AACD;;;WAED,qBAAY;AACV,UAAI,KAAKA,GAAL,CAASQ,aAAb,EAA4B;AAC1BnB,QAAAA,GAAG,CAACiB,SAAJ,CAAcG,WAAd,CAA0B,KAAKT,GAA/B;AACD;AACF;;;WAED,oBAAW;AACT,UAAI,CAAC,KAAKG,eAAV,EAA2B;AACzB,aAAKA,eAAL,GAAuB,IAAvB;AACA;AACD;;AAED,UAAQN,KAAR,GAAkB,IAAlB,CAAQA,KAAR;AACA,WAAKa,SAAL,CAAeb,KAAf;AACD;AAED;AACF;AACA;;;;WACE,mBAAUA,KAAV,EAAiB;AACf,UAAMG,GAAG,GAAG,KAAKA,GAAjB;AACA,UAAMW,aAAa,GAAG,IAAtB;AAEAnB,MAAAA,YAAY,CAACQ,GAAD,EAAMW,aAAN,EAAqBd,KAArB,CAAZ;AACD;;;;EAxCeJ,M;;AA2ClB,eAAeE,GAAf","sourcesContent":["import app from '../app'\nimport { PIXI, Layer } from '../core'\nimport { transformDOM } from '../util'\n\nconst { Sprite, Texture } = PIXI\n\n/**\n * Create a DOM element.\n */\nclass DOM extends Sprite {\n  constructor(tag = 'div', { layer = Layer.DOM_INTERACTION } = {}) {\n    super(Texture.EMPTY)\n\n    this.layer = layer\n    this.dom = document.createElement(tag)\n    this.skipFirstUpdate = false\n  }\n\n  onAdded() {\n    // hide dom for now.\n    // renderDOM will give it right opacity later.\n    this.dom.style.opacity = 0\n    app.container.appendChild(this.dom)\n  }\n\n  onRemoved() {\n    if (this.dom.parentElement) {\n      app.container.removeChild(this.dom)\n    }\n  }\n\n  onUpdate() {\n    if (!this.skipFirstUpdate) {\n      this.skipFirstUpdate = true\n      return\n    }\n\n    const { layer } = this\n    this.renderDOM(layer)\n  }\n\n  /**\n   * @ignore\n   */\n  renderDOM(layer) {\n    const dom = this.dom\n    const displayObject = this\n\n    transformDOM(dom, displayObject, layer)\n  }\n}\n\nexport default DOM\n"],"file":"DOM.js"}