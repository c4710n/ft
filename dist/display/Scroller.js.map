{"version":3,"sources":["../../src/display/Scroller.js"],"names":["PIXI","Tween","Easing","clamp","Sprite","WHITE","Texture","Scroller","content","options","event","stopTween","isScrolling","data","pointerDownPosition","getLocalPosition","x","scale","y","previousPosition","previousTimestamp","originalEvent","timeStamp","currentPosition","currentTimestamp","time","factor","isEnabledX","shiftX","scrollVelocityX","maxOverflowX","minOverflowX","added","isEnabledY","shiftY","scrollVelocityY","maxOverflowY","minOverflowY","emitProgress","handleMovementX","handleMovementY","resetScrollVelocity","bounceX","stop","bounceY","momentumX","momentumY","absScrollVelocityX","Math","abs","from","to","velocity","cacheX","duration","resistance","momentum","easing","Quintic","Out","start","onUpdate","handleBounceX","fromMomentum","onComplete","absScrollVelocityY","cacheY","handleBounceY","maxX","minX","emit","type","bounce","Quartic","maxY","minY","view","Container","bg","setAlpha","addChild","mask","Graphics","$mask","basePoint","setSize","setPosition","cachedValues","undefined","viewWidth","viewHeight","contentWidth","contentHeight","setup","setInteractive","on","onPointerDown","onPointerMove","onPointerUp","progressX","progressY","setupBounds","lazyRender","prop","value","defaultValue","width","height","overflow","enableX","enableY","enableLazyRender","setProp","currentContentWidth","currentContentHeight","currentViewWidth","currentViewHeight","cachedContentWidth","cachedContentHeight","cachedViewWidth","cachedViewHeight","clear","beginFill","drawRect","endFill","currentX","currentY","cachedX","cachedY","viewLeft","viewRight","viewTop","viewBottom","children","child","top","bottom","left","right","isChildOutOfView","renderable","visible","displayobject","position"],"mappings":"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","sourcesContent":["import { PIXI } from '../core'\nimport { Tween, Easing } from '../animation'\nimport { clamp } from '../util/math'\n\nconst { Sprite } = PIXI\nconst { WHITE } = PIXI.Texture\n\nclass Scroller extends PIXI.Container {\n  /**\n   * @param {DisplayObject} content the content will be scrolled\n   * @param {Object} options\n   * @param {number} [options.width=750] the width of scroller\n   * @param {number} [options.height=1500] the height of scroller\n   * @param {boolean} [options.enableX=false] enable scrolling in X direction\n   * @param {boolean} [options.enableY=true] enable scrolling in Y direction\n   * @param {number} [options.resistance=20] the resistance of scrolling, valid value: 0 - 99\n   * @param {number} [options.overflow=100] overflow distance of bounce\n   * @param {number} [options.bgColor=0xffffff] background color\n   */\n  constructor(content, options) {\n    super()\n\n    const view = new PIXI.Container()\n\n    /* bg */\n    const bg = new Sprite(WHITE).setAlpha(0)\n    this.bg = bg\n    view.addChild(bg)\n\n    /* mask */\n    const mask = new PIXI.Graphics()\n    this.addChild(mask)\n    this.$mask = mask\n    view.mask = mask\n\n    /* content */\n    // help to calculate the right size of content\n    const basePoint = new Sprite(PIXI.Texture.WHITE)\n      .setAlpha(0)\n      .setSize(1, 1)\n      .setPosition(0, 0)\n    content.addChild(basePoint)\n    this.content = content\n    view.addChild(content)\n\n    // undefined value ensures that the first call of setup functions will not be skipped\n    this.cachedValues = {\n      x: undefined,\n      y: undefined,\n      viewWidth: undefined,\n      viewHeight: undefined,\n      contentWidth: undefined,\n      contentHeight: undefined,\n    }\n\n    /* setup */\n    this.setup(options)\n\n    view\n      .setInteractive(true)\n      .on('pointerdown', this.onPointerDown)\n      .on('pointermove', this.onPointerMove)\n      .on('pointerup', this.onPointerUp)\n      .on('pointerupoutside', this.onPointerUp)\n\n    this.addChild(view)\n  }\n\n  /**\n   * @access private\n   */\n  onPointerDown = (event) => {\n    this.stopTween()\n    this.isScrolling = true\n\n    this.data = event.data\n    this.pointerDownPosition = this.data.getLocalPosition(this.content)\n    this.pointerDownPosition.x *= this.content.scale.x\n    this.pointerDownPosition.y *= this.content.scale.y\n\n    this.previousPosition = this.pointerDownPosition\n    this.previousTimestamp = event.data.originalEvent.timeStamp\n  }\n\n  emitProgress() {\n    const { x, y } = this.content\n    const { minX, minY } = this\n\n    const progressX = minX === 0 ? 0 : x / minX\n    const progressY = minY === 0 ? 0 : y / minY\n\n    this.emit('progress', { x: progressX, y: progressY })\n  }\n\n  setProgress(x, y) {\n    const { minX, minY } = this\n\n    this.content.x = minX * clamp(x, 0, 1)\n    this.content.y = minY * clamp(y, 0, 1)\n  }\n\n  /**\n   * @access private\n   */\n  onPointerMove = (event) => {\n    if (!this.isScrolling) return\n\n    const currentPosition = this.data.getLocalPosition(this)\n    const currentTimestamp = event.data.originalEvent.timeStamp\n    const time = currentTimestamp - this.previousTimestamp\n    const factor = 10\n\n    if (this.isEnabledX()) {\n      const shiftX = currentPosition.x - this.previousPosition.x\n      this.scrollVelocityX = (shiftX / time) * factor\n\n      let x = currentPosition.x - this.pointerDownPosition.x\n      if (x > this.maxOverflowX) {\n        x = this.maxOverflowX\n      } else if (x < this.minOverflowX) {\n        x = this.minOverflowX\n      }\n\n      if (!this.content.added) return\n      this.content.x = x\n    }\n\n    if (this.isEnabledY()) {\n      const shiftY = currentPosition.y - this.previousPosition.y\n      this.scrollVelocityY = (shiftY / time) * factor\n\n      let y = currentPosition.y - this.pointerDownPosition.y\n      if (y > this.maxOverflowY) {\n        y = this.maxOverflowY\n      } else if (y < this.minOverflowY) {\n        y = this.minOverflowY\n      }\n\n      if (!this.content.added) return\n      this.content.y = y\n    }\n\n    this.emitProgress()\n    this.previousPosition = currentPosition\n    this.previousTimestamp = currentTimestamp\n  }\n\n  /**\n   * @access private\n   */\n  onPointerUp = () => {\n    this.isScrolling = false\n    this.data = null\n\n    if (this.isEnabledX()) this.handleMovementX()\n    if (this.isEnabledY()) this.handleMovementY()\n    this.resetScrollVelocity()\n  }\n\n  /**\n   * @access private\n   */\n  stopTween = () => {\n    if (this.bounceX) this.bounceX.stop()\n    if (this.bounceY) this.bounceY.stop()\n    if (this.momentumX) this.momentumX.stop()\n    if (this.momentumY) this.momentumY.stop()\n  }\n\n  /**\n   * @access private\n   */\n  resetScrollVelocity() {\n    this.previousPosition = null\n    this.previousTimestamp = 0\n    this.scrollVelocityX = 0\n    this.scrollVelocityY = 0\n  }\n\n  handleMovementX = () => {\n    const absScrollVelocityX = Math.abs(this.scrollVelocityX)\n    if (absScrollVelocityX >= 3) {\n      const from = {}\n      const to = {}\n\n      from.velocity = this.scrollVelocityX\n      to.velocity = 0\n\n      let { x: cacheX } = this.content\n      const duration = (100 - this.resistance) * absScrollVelocityX\n\n      const momentum = new Tween(from)\n        .to(to)\n        .duration(duration)\n        .easing(Easing.Quintic.Out)\n        .start()\n\n      momentum.onUpdate(({ velocity }) => {\n        cacheX += velocity\n\n        if (cacheX <= this.maxOverflowX && cacheX >= this.minOverflowX) {\n          if (!this.content.added) return\n          this.content.x = cacheX\n          this.emitProgress()\n        } else {\n          momentum.stop()\n          this.handleBounceX({ fromMomentum: true })\n        }\n      })\n\n      momentum.onComplete(() => this.handleBounceX({ fromMomentum: true }))\n      this.momentumX = momentum\n    } else {\n      this.handleBounceX({ fromMomentum: false })\n    }\n  }\n\n  handleMovementY = () => {\n    const absScrollVelocityY = Math.abs(this.scrollVelocityY)\n    if (absScrollVelocityY >= 3) {\n      const from = {}\n      const to = {}\n\n      from.velocity = this.scrollVelocityY\n      to.velocity = 0\n\n      let { y: cacheY } = this.content\n      const duration = (100 - this.resistance) * absScrollVelocityY\n      this.resetScrollVelocity()\n\n      const momentum = new Tween(from)\n        .to(to)\n        .duration(duration)\n        .easing(Easing.Quintic.Out)\n        .start()\n\n      momentum.onUpdate(({ velocity }) => {\n        cacheY += velocity\n\n        if (cacheY <= this.maxOverflowY && cacheY >= this.minOverflowY) {\n          if (!this.content.added) return\n          this.content.y = cacheY\n          this.emitProgress()\n        } else {\n          momentum.stop()\n          this.handleBounceY({ fromMomentum: true })\n        }\n      })\n\n      momentum.onComplete(() => this.handleBounceY({ fromMomentum: true }))\n      this.momentumY = momentum\n    } else {\n      this.handleBounceY({ fromMomentum: false })\n    }\n  }\n\n  handleBounceX = ({ fromMomentum = false } = {}) => {\n    const { x } = this.content\n\n    if (x > this.maxX || x < this.minX) {\n      const from = { x }\n      const to = {}\n\n      if (x > this.maxX) {\n        to.x = this.maxX\n        this.emit('bounce', { type: 'right', fromMomentum })\n      } else if (x < this.minX) {\n        to.x = this.minX\n        this.emit('bounce', { type: 'left', fromMomentum })\n      }\n\n      const bounce = new Tween(from)\n        .to(to)\n        .duration(1000)\n        .easing(Easing.Quartic.Out)\n        .start()\n\n      bounce.onUpdate(({ x }) => {\n        if (!this.content.added) return\n        this.content.x = x\n        this.emitProgress()\n      })\n\n      this.bounceX = bounce\n    }\n  }\n\n  handleBounceY = ({ fromMomentum = false } = {}) => {\n    const { y } = this.content\n\n    if (y > this.maxY || y < this.minY) {\n      const from = { y }\n      const to = {}\n\n      if (y > this.maxY) {\n        to.y = this.maxY\n        this.emit('bounce', { type: 'top', fromMomentum })\n      } else if (y < this.minY) {\n        to.y = this.minY\n        this.emit('bounce', { type: 'bottom', fromMomentum })\n      }\n\n      const bounce = new Tween(from)\n        .to(to)\n        .duration(1000)\n        .easing(Easing.Quartic.Out)\n        .start()\n\n      bounce.onUpdate(({ y }) => {\n        if (!this.content.added) return\n        this.content.y = y\n        this.emitProgress()\n      })\n\n      this.bounceY = bounce\n    }\n  }\n\n  onUpdate() {\n    this.setupBounds()\n    this.lazyRender()\n  }\n\n  setProp(prop, value, defaultValue) {\n    if (value === undefined) {\n      if (this[prop] === undefined) {\n        this[prop] = defaultValue\n      }\n    } else {\n      this[prop] = value\n    }\n  }\n\n  setup({\n    width,\n    height,\n    overflow,\n    resistance,\n    enableX,\n    enableY,\n    enableLazyRender,\n  }) {\n    this.setProp('viewWidth', width, 750)\n    this.setProp('viewHeight', height, 1500)\n    this.setProp('overflow', overflow, 50)\n    this.setProp('resistance', resistance, 20)\n    this.setProp('enableX', enableX, false)\n    this.setProp('enableY', enableY, true)\n\n    this.momentumX = null\n    this.momentumY = null\n    this.resetScrollVelocity()\n\n    this.setProp('enableLazyRender', enableLazyRender, false)\n\n    this.setupBounds()\n    this.lazyRender()\n  }\n\n  setupBounds() {\n    const { width: currentContentWidth, height: currentContentHeight } =\n      this.content\n\n    const { viewWidth: currentViewWidth, viewHeight: currentViewHeight } = this\n\n    const {\n      contentWidth: cachedContentWidth,\n      contentHeight: cachedContentHeight,\n      viewWidth: cachedViewWidth,\n      viewHeight: cachedViewHeight,\n    } = this.cachedValues\n\n    if (\n      currentContentWidth === cachedContentWidth &&\n      currentContentHeight === cachedContentHeight &&\n      currentViewWidth === cachedViewWidth &&\n      currentViewHeight === cachedViewHeight\n    ) {\n      return\n    }\n\n    this.stopTween()\n\n    this.cachedValues.viewWidth = currentViewWidth\n    this.cachedValues.viewHeight = currentViewHeight\n    this.cachedValues.contentWidth = currentContentWidth\n    this.cachedValues.contentHeight = currentContentHeight\n\n    // bg\n    const { bg } = this\n    bg.width = currentViewWidth\n    bg.height = currentViewHeight\n\n    // view mask\n    const mask = this.$mask\n    mask.clear()\n    mask.beginFill(0xffff00)\n    mask.drawRect(0, 0, currentViewWidth, currentViewHeight)\n    mask.endFill()\n\n    // position\n    this.maxX = 0\n    this.minX = currentViewWidth - currentContentWidth\n    if (this.minX > 0) this.minX = 0\n    this.maxY = 0\n    this.minY = currentViewHeight - currentContentHeight\n    if (this.minY > 0) this.minY = 0\n\n    // if the scrolling distance beyonds the min and max value,\n    // then reset it to min or max value\n    if (this.content.x < this.minX) {\n      this.content.x = this.minX\n    }\n\n    if (this.content.x > this.maxX) {\n      this.content.x = this.maxX\n    }\n\n    if (this.content.y < this.minY) {\n      this.content.y = this.minY\n    }\n\n    if (this.content.y > this.maxY) {\n      this.content.y = this.maxY\n    }\n\n    // bounce related\n    const { overflow } = this\n    this.bounceX = null\n    this.bounceY = null\n    this.maxOverflowX = overflow\n    this.minOverflowX = this.minX - overflow\n    this.maxOverflowY = overflow\n    this.minOverflowY = this.minY - overflow\n  }\n\n  lazyRender() {\n    if (!this.enableLazyRender) return\n\n    const { x: currentX, y: currentY } = this.content\n    const { x: cachedX, y: cachedY } = this.cachedValues\n\n    if (currentX === cachedX && currentY === cachedY) {\n      return\n    }\n    this.cachedValues.x = currentX\n    this.cachedValues.y = currentY\n\n    const viewLeft = -this.content.x\n    const viewRight = viewLeft + this.viewWidth\n    const viewTop = -this.content.y\n    const viewBottom = viewTop + this.viewHeight\n\n    for (const child of this.content.children) {\n      const { top, bottom, left, right } = getLocalPosition(child)\n      const isChildOutOfView =\n        top > viewBottom ||\n        bottom < viewTop ||\n        left > viewRight ||\n        right < viewLeft\n\n      if (isChildOutOfView) {\n        child.renderable = false\n        child.visible = false\n      } else {\n        child.renderable = true\n        child.visible = true\n      }\n    }\n  }\n\n  isEnabledX() {\n    const { viewWidth, contentWidth } = this.cachedValues\n    return this.enableX && viewWidth < contentWidth\n  }\n\n  isEnabledY() {\n    const { viewHeight, contentHeight } = this.cachedValues\n    return this.enableY && viewHeight < contentHeight\n  }\n}\n\nfunction getLocalPosition(displayobject) {\n  const { x, y } = displayobject.position\n  const { width, height } = displayobject\n\n  const left = x\n  const right = x + width\n  const top = y\n  const bottom = y + height\n\n  return { left, right, top, bottom }\n}\n\nexport default Scroller\n"],"file":"Scroller.js"}