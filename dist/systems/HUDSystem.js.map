{"version":3,"sources":["../../src/systems/HUDSystem.js"],"names":["app","System","checkPercentage","value","num","Number","parseFloat","endsWith","percentage","HUDSystem","entities","forEach","entity","component","components","name","position","$x","$y","left","right","top","bottom","bounds","systems","scale","undefined","isPercentage","offset","width","height","x","y"],"mappings":"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","sourcesContent":["import app from '../app'\nimport System from './System'\n\nfunction checkPercentage(value) {\n  const num = Number.parseFloat(value)\n\n  if (\n    typeof value === 'string' &&\n    value.endsWith('%') &&\n    typeof num === 'number' &&\n    num <= 100 &&\n    num >= 0\n  ) {\n    const percentage = num / 100\n    return [true, percentage]\n  } else {\n    return [false]\n  }\n}\n\nclass HUDSystem extends System {\n  constructor() {\n    super('hud')\n  }\n\n  update() {\n    this.entities.forEach((entity) => {\n      const component = entity.components[this.name]\n      this.position(entity, component)\n    })\n  }\n\n  position(entity, component) {\n    let $x, $y\n    const { left, right, top, bottom } = component\n    const { bounds } = app.systems.scale\n\n    if (left !== undefined) {\n      const [isPercentage, percentage] = checkPercentage(left)\n      const offset = isPercentage ? bounds.width * percentage : left\n      $x = bounds.left + offset\n    }\n\n    if (right !== undefined) {\n      const [isPercentage, percentage] = checkPercentage(right)\n      const offset = isPercentage ? bounds.width * percentage : right\n      $x = bounds.right - offset\n    }\n\n    if (top !== undefined) {\n      const [isPercentage, percentage] = checkPercentage(top)\n      const offset = isPercentage ? bounds.height * percentage : top\n      $y = bounds.top + offset\n    }\n\n    if (bottom !== undefined) {\n      const [isPercentage, percentage] = checkPercentage(bottom)\n      const offset = isPercentage ? bounds.height * percentage : bottom\n      $y = bounds.bottom - offset\n    }\n\n    if ($x) entity.x = $x\n    if ($y) entity.y = $y\n  }\n}\n\nexport default HUDSystem\n"],"file":"HUDSystem.js"}